(function(e){function t(t,r,o,u,a){function f(){v.unbind("webkitTransitionEnd transitionend otransitionend oTransitionEnd");r&&n(r,o,u,a);a.startOrder=[];a.newOrder=[];a.origSort=[];a.checkSort=[];d.removeStyle(a.prefix+"filter, filter, "+a.prefix+"transform, transform, opacity, display").css(a.clean).removeAttr("data-checksum");window.atob||d.css({display:"none",opacity:"0"});v.removeStyle(a.prefix+"transition, transition, "+a.prefix+"perspective, perspective, "+a.prefix+"perspective-origin, perspective-origin, "+(a.resizeContainer?"height":""));"list"==a.layoutMode?(m.css({display:a.targetDisplayList,opacity:"1"}),a.origDisplay=a.targetDisplayList):(m.css({display:a.targetDisplayGrid,opacity:"1"}),a.origDisplay=a.targetDisplayGrid);a.origLayout=a.layoutMode;setTimeout(function(){d.removeStyle(a.prefix+"transition, transition");a.mixing=!1;if("function"==typeof a.onMixEnd){var e=a.onMixEnd.call(this,a);a=e?e:a}})}clearInterval(a.failsafe);a.mixing=!0;a.filter=t;if("function"==typeof a.onMixStart){var l=a.onMixStart.call(this,a);a=l?l:a}for(var c=a.transitionSpeed,l=0;2>l;l++){var h=0==l?h=a.prefix:"";a.transition[h+"transition"]="all "+c+"ms linear";a.transition[h+"transform"]=h+"translate3d(0,0,0)";a.perspective[h+"perspective"]=a.perspectiveDistance+"px";a.perspective[h+"perspective-origin"]=a.perspectiveOrigin}var p=a.targetSelector,d=u.find(p);d.each(function(){this.data={}});var v=d.parent();v.css(a.perspective);a.easingFallback="ease-in-out";"smooth"==a.easing&&(a.easing="cubic-bezier(0.25, 0.46, 0.45, 0.94)");"snap"==a.easing&&(a.easing="cubic-bezier(0.77, 0, 0.175, 1)");"windback"==a.easing&&(a.easing="cubic-bezier(0.175, 0.885, 0.320, 1.275)",a.easingFallback="cubic-bezier(0.175, 0.885, 0.320, 1)");"windup"==a.easing&&(a.easing="cubic-bezier(0.6, -0.28, 0.735, 0.045)",a.easingFallback="cubic-bezier(0.6, 0.28, 0.735, 0.045)");l="list"==a.layoutMode&&null!=a.listEffects?a.listEffects:a.effects;Array.prototype.indexOf&&(a.fade=-1<l.indexOf("fade")?"0":"",a.scale=-1<l.indexOf("scale")?"scale(.01)":"",a.rotateZ=-1<l.indexOf("rotateZ")?"rotate(180deg)":"",a.rotateY=-1<l.indexOf("rotateY")?"rotateY(90deg)":"",a.rotateX=-1<l.indexOf("rotateX")?"rotateX(90deg)":"",a.blur=-1<l.indexOf("blur")?"blur(8px)":"",a.grayscale=-1<l.indexOf("grayscale")?"grayscale(100%)":"");var m=e(),g=e(),y=[],b=!1;"string"===typeof t?y=s(t):(b=!0,e.each(t,function(e){y[e]=s(this)}));"or"==a.filterLogic?(""==y[0]&&y.shift(),1>y.length?g=g.add(u.find(p+":visible")):d.each(function(){var t=e(this);if(b){var n=0;e.each(y,function(e){this.length?t.is("."+this.join(", ."))&&n++:0<n&&n++});n==y.length?m=m.add(t):g=g.add(t)}else t.is("."+y.join(", ."))?m=m.add(t):g=g.add(t)})):(m=m.add(v.find(p+"."+y.join("."))),g=g.add(v.find(p+":not(."+y.join(".")+"):visible")));t=m.length;var w=e(),E=e(),S=e();g.each(function(){var t=e(this);"none"!=t.css("display")&&(w=w.add(t),S=S.add(t))});if(m.filter(":visible").length==t&&!w.length&&!r){if(a.origLayout==a.layoutMode)return f(),!1;if(1==m.length)return"list"==a.layoutMode?(u.addClass(a.listClass),u.removeClass(a.gridClass),S.css("display",a.targetDisplayList)):(u.addClass(a.gridClass),u.removeClass(a.listClass),S.css("display",a.targetDisplayGrid)),f(),!1}a.origHeight=v.height();if(m.length){u.removeClass(a.failClass);m.each(function(){var t=e(this);"none"==t.css("display")?E=E.add(t):S=S.add(t)});if(a.origLayout!=a.layoutMode&&!1==a.animateGridList)return"list"==a.layoutMode?(u.addClass(a.listClass),u.removeClass(a.gridClass),S.css("display",a.targetDisplayList)):(u.addClass(a.gridClass),u.removeClass(a.listClass),S.css("display",a.targetDisplayGrid)),f(),!1;if(!window.atob)return f(),!1;d.css(a.clean);S.each(function(){this.data.origPos=e(this).offset()});"list"==a.layoutMode?(u.addClass(a.listClass),u.removeClass(a.gridClass),E.css("display",a.targetDisplayList)):(u.addClass(a.gridClass),u.removeClass(a.listClass),E.css("display",a.targetDisplayGrid));E.each(function(){this.data.showInterPos=e(this).offset()});w.each(function(){this.data.hideInterPos=e(this).offset()});S.each(function(){this.data.preInterPos=e(this).offset()});"list"==a.layoutMode?S.css("display",a.targetDisplayList):S.css("display",a.targetDisplayGrid);r&&n(r,o,u,a);if(r&&i(a.origSort,a.checkSort))return f(),!1;w.hide();E.each(function(t){this.data.finalPos=e(this).offset()});S.each(function(){this.data.finalPrePos=e(this).offset()});a.newHeight=v.height();r&&n("reset",null,u,a);E.hide();S.css("display",a.origDisplay);"block"==a.origDisplay?(u.addClass(a.listClass),E.css("display",a.targetDisplayList)):(u.removeClass(a.listClass),E.css("display",a.targetDisplayGrid));a.resizeContainer&&v.css("height",a.origHeight+"px");t={};for(l=0;2>l;l++)h=0==l?h=a.prefix:"",t[h+"transform"]=a.scale+" "+a.rotateX+" "+a.rotateY+" "+a.rotateZ,t[h+"filter"]=a.blur+" "+a.grayscale;E.css(t);S.each(function(){var t=this.data,n=e(this);n.hasClass("mix_tohide")?(t.preTX=t.origPos.left-t.hideInterPos.left,t.preTY=t.origPos.top-t.hideInterPos.top):(t.preTX=t.origPos.left-t.preInterPos.left,t.preTY=t.origPos.top-t.preInterPos.top);for(var r={},i=0;2>i;i++){var s=0==i?s=a.prefix:"";r[s+"transform"]="translate("+t.preTX+"px,"+t.preTY+"px)"}n.css(r)});"list"==a.layoutMode?(u.addClass(a.listClass),u.removeClass(a.gridClass)):(u.addClass(a.gridClass),u.removeClass(a.listClass));setTimeout(function(){if(a.resizeContainer){for(var t={},n=0;2>n;n++){var r=0==n?r=a.prefix:"";t[r+"transition"]="all "+c+"ms ease-in-out";t.height=a.newHeight+"px"}v.css(t)}w.css("opacity",a.fade);E.css("opacity",1);E.each(function(){var t=this.data;t.tX=t.finalPos.left-t.showInterPos.left;t.tY=t.finalPos.top-t.showInterPos.top;for(var n={},r=0;2>r;r++){var i=0==r?i=a.prefix:"";n[i+"transition-property"]=i+"transform, "+i+"filter, opacity";n[i+"transition-timing-function"]=a.easing+", linear, linear";n[i+"transition-duration"]=c+"ms";n[i+"transition-delay"]="0";n[i+"transform"]="translate("+t.tX+"px,"+t.tY+"px)";n[i+"filter"]="none"}e(this).css("-webkit-transition","all "+c+"ms "+a.easingFallback).css(n)});S.each(function(){var t=this.data;t.tX=0!=t.finalPrePos.left?t.finalPrePos.left-t.preInterPos.left:0;t.tY=0!=t.finalPrePos.left?t.finalPrePos.top-t.preInterPos.top:0;for(var n={},r=0;2>r;r++){var i=0==r?i=a.prefix:"";n[i+"transition"]="all "+c+"ms "+a.easing;n[i+"transform"]="translate("+t.tX+"px,"+t.tY+"px)"}e(this).css("-webkit-transition","all "+c+"ms "+a.easingFallback).css(n)});t={};for(n=0;2>n;n++)r=0==n?r=a.prefix:"",t[r+"transition"]="all "+c+"ms "+a.easing+", "+r+"filter "+c+"ms linear, opacity "+c+"ms linear",t[r+"transform"]=a.scale+" "+a.rotateX+" "+a.rotateY+" "+a.rotateZ,t[r+"filter"]=a.blur+" "+a.grayscale,t.opacity=a.fade;w.css(t);v.bind("webkitTransitionEnd transitionend otransitionend oTransitionEnd",function(t){if(-1<t.originalEvent.propertyName.indexOf("transform")||-1<t.originalEvent.propertyName.indexOf("opacity"))-1<p.indexOf(".")?e(t.target).hasClass(p.replace(".",""))&&f():e(t.target).is(p)&&f()})},10);a.failsafe=setTimeout(function(){a.mixing&&f()},c+400)}else{a.resizeContainer&&v.css("height",a.origHeight+"px");if(!window.atob)return f(),!1;w=g;setTimeout(function(){v.css(a.perspective);if(a.resizeContainer){for(var e={},t=0;2>t;t++){var n=0==t?n=a.prefix:"";e[n+"transition"]="height "+c+"ms ease-in-out";e.height=a.minHeight+"px"}v.css(e)}d.css(a.transition);if(g.length){e={};for(t=0;2>t;t++)n=0==t?n=a.prefix:"",e[n+"transform"]=a.scale+" "+a.rotateX+" "+a.rotateY+" "+a.rotateZ,e[n+"filter"]=a.blur+" "+a.grayscale,e.opacity=a.fade;w.css(e);v.bind("webkitTransitionEnd transitionend otransitionend oTransitionEnd",function(e){if(-1<e.originalEvent.propertyName.indexOf("transform")||-1<e.originalEvent.propertyName.indexOf("opacity"))u.addClass(a.failClass),f()})}else a.mixing=!1},10)}}function n(t,n,r,i){function s(e,n){var r=isNaN(1*e.attr(t))?e.attr(t).toLowerCase():1*e.attr(t),i=isNaN(1*n.attr(t))?n.attr(t).toLowerCase():1*n.attr(t);return r<i?-1:r>i?1:0}function o(e){"asc"==n?a.prepend(e).prepend(" "):a.append(e).append(" ")}function u(e){e=e.slice();for(var t=e.length,n=t;n--;){var r=parseInt(Math.random()*t),i=e[n];e[n]=e[r];e[r]=i}return e}r.find(i.targetSelector).wrapAll('<div class="mix_sorter"/>');var a=r.find(".mix_sorter");i.origSort.length||a.find(i.targetSelector+":visible").each(function(){e(this).wrap("<s/>");i.origSort.push(e(this).parent().html().replace(/\s+/g,""));e(this).unwrap()});a.empty();if("reset"==t)e.each(i.startOrder,function(){a.append(this).append(" ")});else if("default"==t)e.each(i.origOrder,function(){o(this)});else if("random"==t)i.newOrder.length||(i.newOrder=u(i.startOrder)),e.each(i.newOrder,function(){a.append(this).append(" ")});else if("custom"==t)e.each(n,function(){o(this)});else{if("undefined"===typeof i.origOrder[0].attr(t))return console.log("No such attribute found. Terminating"),!1;i.newOrder.length||(e.each(i.origOrder,function(){i.newOrder.push(e(this))}),i.newOrder.sort(s));e.each(i.newOrder,function(){o(this)})}i.checkSort=[];a.find(i.targetSelector+":visible").each(function(t){var n=e(this);0==t&&n.attr("data-checksum","1");n.wrap("<s/>");i.checkSort.push(n.parent().html().replace(/\s+/g,""));n.unwrap()});r.find(i.targetSelector).unwrap()}function r(e){for(var t=["Webkit","Moz","O","ms"],n=0;n<t.length;n++)if(t[n]+"Transition"in e.style)return t[n];return"transition"in e.style?"":!1}function i(e,t){if(e.length!=t.length)return!1;for(var n=0;n<t.length;n++)if(e[n].compare&&!e[n].compare(t[n])||e[n]!==t[n])return!1;return!0}function s(t){t=t.replace(/\s{2,}/g," ");var n=t.split(" ");e.each(n,function(e){"all"==this&&(n[e]="mix_all")});""==n[0]&&n.shift();return n}var o={init:function(i){return this.each(function(){var s=window.navigator.appVersion.match(/Chrome\/(\d+)\./),s=s?parseInt(s[1],10):!1,o=function(e){e=document.getElementById(e);var t=e.parentElement,n=document.createElement("div"),r=document.createDocumentFragment();t.insertBefore(n,e);r.appendChild(e);t.replaceChild(e,n)};(s&&31==s||32==s)&&o(this.id);var u={targetSelector:".mix",filterSelector:".filter",sortSelector:".sort",buttonEvent:"click",effects:["fade","scale"],listEffects:null,easing:"smooth",layoutMode:"grid",targetDisplayGrid:"inline-block",targetDisplayList:"block",listClass:"",gridClass:"",transitionSpeed:600,showOnLoad:"all",sortOnLoad:!1,multiFilter:!1,filterLogic:"or",resizeContainer:!0,minHeight:0,failClass:"fail",perspectiveDistance:"3000",perspectiveOrigin:"50% 50%",animateGridList:!0,onMixLoad:null,onMixStart:null,onMixEnd:null,container:null,origOrder:[],startOrder:[],newOrder:[],origSort:[],checkSort:[],filter:"",mixing:!1,origDisplay:"",origLayout:"",origHeight:0,newHeight:0,isTouch:!1,resetDelay:0,failsafe:null,prefix:"",easingFallback:"ease-in-out",transition:{},perspective:{},clean:{},fade:"1",scale:"",rotateX:"",rotateY:"",rotateZ:"",blur:"",grayscale:""};i&&e.extend(u,i);this.config=u;e.support.touch="ontouchend"in document;e.support.touch&&(u.isTouch=!0,u.resetDelay=350);u.container=e(this);var a=u.container;u.prefix=r(a[0]);u.prefix=u.prefix?"-"+u.prefix.toLowerCase()+"-":"";a.find(u.targetSelector).each(function(){u.origOrder.push(e(this))});if(u.sortOnLoad){var f;e.isArray(u.sortOnLoad)?(s=u.sortOnLoad[0],f=u.sortOnLoad[1],e(u.sortSelector+"[data-sort="+u.sortOnLoad[0]+"][data-order="+u.sortOnLoad[1]+"]").addClass("active")):(e(u.sortSelector+"[data-sort="+u.sortOnLoad+"]").addClass("active"),s=u.sortOnLoad,u.sortOnLoad="desc");n(s,f,a,u)}for(f=0;2>f;f++)s=0==f?s=u.prefix:"",u.transition[s+"transition"]="all "+u.transitionSpeed+"ms ease-in-out",u.perspective[s+"perspective"]=u.perspectiveDistance+"px",u.perspective[s+"perspective-origin"]=u.perspectiveOrigin;for(f=0;2>f;f++)s=0==f?s=u.prefix:"",u.clean[s+"transition"]="none";"list"==u.layoutMode?(a.addClass(u.listClass),u.origDisplay=u.targetDisplayList):(a.addClass(u.gridClass),u.origDisplay=u.targetDisplayGrid);u.origLayout=u.layoutMode;f=u.showOnLoad.split(" ");e.each(f,function(){e(u.filterSelector+'[data-filter="'+this+'"]').addClass("active")});a.find(u.targetSelector).addClass("mix_all");"all"==f[0]&&(f[0]="mix_all",u.showOnLoad="mix_all");var l=e();e.each(f,function(){l=l.add(e("."+this))});l.each(function(){var t=e(this);"list"==u.layoutMode?t.css("display",u.targetDisplayList):t.css("display",u.targetDisplayGrid);t.css(u.transition)});setTimeout(function(){u.mixing=!0;l.css("opacity","1");setTimeout(function(){"list"==u.layoutMode?l.removeStyle(u.prefix+"transition, transition").css({display:u.targetDisplayList,opacity:1}):l.removeStyle(u.prefix+"transition, transition").css({display:u.targetDisplayGrid,opacity:1});u.mixing=!1;if("function"==typeof u.onMixLoad){var e=u.onMixLoad.call(this,u);u=e?e:u}},u.transitionSpeed)},10);u.filter=u.showOnLoad;e(u.sortSelector).bind(u.buttonEvent,function(){if(!u.mixing){var n=e(this),r=n.attr("data-sort"),i=n.attr("data-order");if(!n.hasClass("active"))e(u.sortSelector).removeClass("active"),n.addClass("active");else if("random"!=r)return!1;a.find(u.targetSelector).each(function(){u.startOrder.push(e(this))});t(u.filter,r,i,a,u)}});e(u.filterSelector).bind(u.buttonEvent,function(){if(!u.mixing){var n=e(this);if(!1==u.multiFilter)e(u.filterSelector).removeClass("active"),n.addClass("active"),u.filter=n.attr("data-filter"),e(u.filterSelector+'[data-filter="'+u.filter+'"]').addClass("active");else{var r=n.attr("data-filter");n.hasClass("active")?(n.removeClass("active"),u.filter=u.filter.replace(RegExp("(\\s|^)"+r),"")):(n.addClass("active"),u.filter=u.filter+" "+r)}t(u.filter,null,null,a,u)}})})},toGrid:function(){return this.each(function(){var n=this.config;"grid"!=n.layoutMode&&(n.layoutMode="grid",t(n.filter,null,null,e(this),n))})},toList:function(){return this.each(function(){var n=this.config;"list"!=n.layoutMode&&(n.layoutMode="list",t(n.filter,null,null,e(this),n))})},filter:function(n){return this.each(function(){var r=this.config;r.mixing||(e(r.filterSelector).removeClass("active"),e(r.filterSelector+'[data-filter="'+n+'"]').addClass("active"),t(n,null,null,e(this),r))})},sort:function(n){return this.each(function(){var r=this.config,i=e(this);if(!r.mixing){e(r.sortSelector).removeClass("active");if(e.isArray(n)){var s=n[0],o=n[1];e(r.sortSelector+'[data-sort="'+n[0]+'"][data-order="'+n[1]+'"]').addClass("active")}else e(r.sortSelector+'[data-sort="'+n+'"]').addClass("active"),s=n,o="desc";i.find(r.targetSelector).each(function(){r.startOrder.push(e(this))});t(r.filter,s,o,i,r)}})},multimix:function(n){return this.each(function(){var r=this.config,i=e(this);multiOut={filter:r.filter,sort:null,order:"desc",layoutMode:r.layoutMode};e.extend(multiOut,n);r.mixing||(e(r.filterSelector).add(r.sortSelector).removeClass("active"),e(r.filterSelector+'[data-filter="'+multiOut.filter+'"]').addClass("active"),"undefined"!==typeof multiOut.sort&&(e(r.sortSelector+'[data-sort="'+multiOut.sort+'"][data-order="'+multiOut.order+'"]').addClass("active"),i.find(r.targetSelector).each(function(){r.startOrder.push(e(this))})),r.layoutMode=multiOut.layoutMode,t(multiOut.filter,multiOut.sort,multiOut.order,i,r))})},remix:function(n){return this.each(function(){var r=this.config,i=e(this);r.origOrder=[];i.find(r.targetSelector).each(function(){var t=e(this);t.addClass("mix_all");r.origOrder.push(t)});r.mixing||"undefined"===typeof n||(e(r.filterSelector).removeClass("active"),e(r.filterSelector+'[data-filter="'+n+'"]').addClass("active"),t(n,null,null,i,r))})}};e.fn.mixitup=function(e,t){if(o[e])return o[e].apply(this,Array.prototype.slice.call(arguments,1));if("object"===typeof e||!e)return o.init.apply(this,arguments)};e.fn.removeStyle=function(t){return this.each(function(){var n=e(this);t=t.replace(/\s+/g,"");var r=t.split(",");e.each(r,function(){var e=RegExp(this.toString()+"[^;]+;?","g");n.attr("style",function(t,n){if(n)return n.replace(e,"")})})})}})(jQuery)